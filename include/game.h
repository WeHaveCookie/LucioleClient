#include <stdlib.h>
#include <stdio.h>
#include <pthread.h>
#include <SDL/SDL.h>
#define MAXPLAYER 4
#define HEIGHT 480
#define WIDTH 640
#define SPEED 1
///////////////////////////////////////////////////////////////////////////////////
typedef struct Player Player;
struct Player {
    SDL_Rect* position;
    int visible;
    SDL_Surface* image;
};

typedef enum Move Move;
enum Move{
    UP, DOWN, LEFT, RIGHT
};

///////////////////////////////////////////////////////////////////////////////////
// Variable global
Player **m_linkedPlayer;
SDL_Surface* m_screen;
int m_nbrPlayer;
int m_idPlayer;
//int m_gameRun = 0;
pthread_t m_displayer;

///////////////////////////////////////////////////////////////////////////////////
int launch();

///////////////////////////////////////////////////////////////////////////////////
void threadDisplayer();

///////////////////////////////////////////////////////////////////////////////////
// Move permet de faire bouger un joueur
// idPlayer : Numero d'identificateur d'un joueur
// dpl : deplacement (Gauche, Droite, Haut, Bas)
void movePlayer(int idPlayer, Move dpl);

///////////////////////////////////////////////////////////////////////////////////
void newPlayer(int idPlayer);

///////////////////////////////////////////////////////////////////////////////////
void leavePlayer(int idPlayer);

///////////////////////////////////////////////////////////////////////////////////
Player **getLinkedPlayer();

///////////////////////////////////////////////////////////////////////////////////
int getNbrPlayer();

///////////////////////////////////////////////////////////////////////////////////
// Renvoie l'identificateur du joueur
int getIdPlayer();

///////////////////////////////////////////////////////////////////////////////////
// Initialise la position des joueurs
// Les joueurs sont place au coin de l'ecran
int initPlayer(Player *pl, int id);

///////////////////////////////////////////////////////////////////////////////////
// Initialisation d'une partie.
// IdPlayer : Identificateur du joueur
// nbrPlayer : Nombre de joueur dans la partie
// @Ensure : Nombre de joueurs 4 max
int init(int idPlayer, int nbrPlayer, SDL_Surface* screen);
